<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing - CoveTalks</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/Images/CoveTalks_Vertical.svg">
    
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="/css/main.css">
    
    <!-- Page-specific styles ONLY for unique elements -->
    <style>
        /* Shared Hero Section Styles */
        .main-content{
            padding-top: .5rem;
        }
        .hero-section {
            background: linear-gradient(135deg, var(--color-deep) 0%, var(--color-calm) 100%);
            color: white;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        /* Add subtle pattern overlay for depth */
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255,255,255,0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        /* Page Header */
        .page-header {
            padding: 8rem 0 var(--spacing-2xl);
            text-align: center;
            margin-bottom: var(--spacing-2xl);
            position: relative;
            z-index: 1;
        }

        .page-header h1 {
            font-size: 3rem;
            margin-bottom: var(--spacing-md);
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .page-header p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.95;
        }

        /* Pricing Toggle */
        .pricing-toggle {
            text-align: center;
            margin: var(--spacing-2xl) 0;
        }

        .toggle-container {
            display: inline-flex;
            background: white;
            border-radius: 50px;
            padding: 0.5rem;
            box-shadow: var(--shadow-md);
        }

        .toggle-option {
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: 50px;
            cursor: pointer;
            transition: all var(--transition-normal);
            font-weight: var(--font-weight-medium);
            color: var(--color-gray);
        }

        .toggle-option.active {
            background: var(--color-deep);
            color: white;
        }

        /* Pricing Grid */
        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-xl);
            max-width: 1100px;
            margin: 0 auto;
        }

        /* Pricing Card */
        .pricing-card {
            background: white;
            border: 2px solid var(--color-border);
            border-radius: 20px;
            padding: var(--spacing-2xl) var(--spacing-xl);
            text-align: center;
            position: relative;
            transition: all var(--transition-normal);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .pricing-card:hover {
            border-color: var(--color-deep);
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .pricing-card.popular {
            border-color: var(--color-sand);
            background: linear-gradient(135deg, #fff, #fff8e1);
            transform: scale(1.05);
        }

        .pricing-card.popular:hover {
            transform: scale(1.05) translateY(-10px);
        }

        .popular-badge {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-sand);
            color: white;
            padding: 0.75rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: var(--font-weight-bold);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .plan-name {
            font-size: 2rem;
            color: var(--color-deep);
            margin-bottom: var(--spacing-md);
            font-weight: var(--font-weight-black);
        }

        .price-container {
            margin-bottom: var(--spacing-xl);
        }

        .price {
            font-size: 3.5rem;
            font-weight: var(--font-weight-black);
            color: var(--color-deep);
            margin-bottom: 0.5rem;
        }

        .price-period {
            font-size: 1.1rem;
            color: var(--color-gray);
        }

        .price-note {
            font-size: 0.9rem;
            color: var(--color-gray-light);
            margin-top: 0.5rem;
        }

        .features {
            list-style: none;
            margin: var(--spacing-xl) 0;
            text-align: left;
            flex-grow: 1;
        }

        .features li {
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--color-bg-light);
            position: relative;
            padding-left: 2rem;
        }

        .features li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--color-success);
            font-weight: var(--font-weight-bold);
            font-size: 1.2rem;
        }

        .features li:last-child {
            border-bottom: none;
        }

        /* Organization Section */
        .organization-section {
            padding: var(--spacing-3xl) 0;
            text-align: center;
            margin-top: var(--spacing-3xl);
            position: relative;
            z-index: 1;
        }

        .organization-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: var(--spacing-2xl);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all var(--transition-normal);
        }

        .organization-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.3);
        }

        .organization-card h2 {
            font-size: 2.5rem;
            margin-bottom: var(--spacing-md);
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .organization-card p {
            font-size: 1.2rem;
            margin-bottom: var(--spacing-xl);
            opacity: 0.95;
        }

        .btn-white {
            background: white;
            color: var(--color-deep);
            border: none;
            font-weight: var(--font-weight-bold);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-white:hover {
            background: var(--color-foam);
            color: var(--color-deep);
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }

        /* FAQ Section */
        .faq-section {
            padding: var(--spacing-3xl) 0;
            background: white;
        }

        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .faq-section h2 {
            text-align: center;
            margin-bottom: var(--spacing-2xl);
            color: var(--color-deep);
            font-size: 2.5rem;
        }

        .faq-item {
            margin-bottom: var(--spacing-lg);
            border: 1px solid var(--color-border);
            border-radius: 10px;
            overflow: hidden;
            transition: all var(--transition-fast);
        }

        .faq-item:hover {
            border-color: var(--color-deep);
            box-shadow: var(--shadow-sm);
        }

        .faq-question {
            background: var(--color-foam);
            padding: var(--spacing-lg);
            cursor: pointer;
            font-weight: var(--font-weight-medium);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background var(--transition-fast);
        }

        .faq-question:hover {
            background: #e9ecef;
        }

        .faq-answer {
            padding: var(--spacing-lg);
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .faq-answer.active {
            display: block;
        }

        .faq-toggle {
            font-size: 1.5rem;
            transition: transform var(--transition-fast);
        }

        .faq-item.active .faq-toggle {
            transform: rotate(45deg);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading state for buttons */
        .btn-loading {
            position: relative;
            color: transparent !important;
        }

        .btn-loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin-left: -10px;
            margin-top: -10px;
            border: 2px solid white;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Success message */
        .message-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 10px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            color: #155724;
        }

        .message-box h4 {
            margin-bottom: var(--spacing-sm);
            color: #155724;
        }

        /* Mobile Responsive Overrides */
        @media (max-width: 992px) {
            .pricing-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }

            .pricing-card.popular {
                transform: none;
            }

            .pricing-card.popular:hover {
                transform: translateY(-5px);
            }

            .organization-card h2 {
                font-size: 2rem;
            }
        }

        @media (max-width: 768px) {
            .page-header {
                padding: 6rem 0 var(--spacing-xl);
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .page-header p {
                font-size: 1rem;
                padding: 0 var(--spacing-md);
            }

            .price {
                font-size: 2.5rem;
            }

            .plan-name {
                font-size: 1.5rem;
            }

            .toggle-option {
                padding: var(--spacing-sm) var(--spacing-md);
                font-size: 0.9rem;
            }

            .organization-section {
                padding: var(--spacing-2xl) 0;
            }

            .organization-card {
                margin: 0 var(--spacing-md);
            }

            .organization-card h2 {
                font-size: 1.75rem;
            }

            .organization-card p {
                font-size: 1rem;
            }

            .faq-section h2 {
                font-size: 2rem;
            }

            .faq-question {
                padding: var(--spacing-md);
            }
        }

        @media (max-width: 576px) {
            .page-header h1 {
                font-size: 1.75rem;
            }

            .price {
                font-size: 2rem;
            }

            .features {
                font-size: 0.9rem;
            }

            .features li {
                padding: 0.5rem 0;
                padding-left: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header will be auto-injected by header.js -->
    
    <!-- Page Header Hero Section -->
    <div class="hero-section page-header">
        <div class="container">
            <h1>Simple, Transparent Pricing</h1>
            <p>Join the world's largest network of speakers for a low monthly cost</p>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Loading State -->
            <div id="loadingState" class="loading hidden">
                <div class="loading-spinner"></div>
                Loading pricing information...
            </div>

            <!-- Pricing Content -->
            <div id="pricingContent">
                <!-- Pricing Toggle -->
                <div class="pricing-toggle">
                    <div class="toggle-container">
                        <div class="toggle-option active" data-period="monthly" onclick="togglePeriod('monthly')">
                            Monthly
                        </div>
                        <div class="toggle-option" data-period="yearly" onclick="togglePeriod('yearly')">
                            Yearly (Save 25%)
                        </div>
                    </div>
                </div>

                <!-- Pricing Grid -->
                <div class="pricing-grid">
                    <!-- Standard Plan -->
                    <div class="pricing-card">
                        <h3 class="plan-name">Standard</h3>
                        <div class="price-container">
                            <div class="price" data-monthly="97" data-yearly="997">$97</div>
                            <div class="price-period">per month</div>
                            <div class="price-note yearly-note hidden">Billed annually ($997/year)</div>
                        </div>
                        <ul class="features">
                            <li>Full database access</li>
                            <li>Contact information</li>
                            <li>Basic search filters</li>
                            <li>Profile in directory</li>
                            <li>Email support</li>
                            <li>Speaking opportunity alerts</li>
                            <li>1 on 1 coaching (one session)</li>
                        </ul>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-block monthly-btn" onclick="selectPlan('standard', 'monthly')">
                                Start Monthly Plan
                            </button>
                            <button class="btn btn-primary btn-block yearly-btn hidden" onclick="selectPlan('standard', 'yearly')">
                                Start Yearly Plan
                            </button>
                        </div>
                    </div>

                    <!-- Plus Plan (Popular) -->
                    <div class="pricing-card popular">
                        <div class="popular-badge">MOST POPULAR</div>
                        <h3 class="plan-name">Plus</h3>
                        <div class="price-container">
                            <div class="price" data-monthly="147" data-yearly="1497">$147</div>
                            <div class="price-period">per month</div>
                            <div class="price-note yearly-note hidden">Billed annually ($1,497/year)</div>
                        </div>
                        <ul class="features">
                            <li>Everything in Standard</li>
                            <li>Advanced search filters</li>
                            <li>Priority support</li>
                            <li>Booking management tools</li>
                            <li>Analytics dashboard</li>
                            <li>Featured profile placement</li>
                            <li>Custom speaker tags</li>
                            <li>One additional coaching session</li>
                        </ul>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-block monthly-btn" onclick="selectPlan('plus', 'monthly')">
                                Start Monthly Plan
                            </button>
                            <button class="btn btn-primary btn-block yearly-btn hidden" onclick="selectPlan('plus', 'yearly')">
                                Start Yearly Plan
                            </button>
                        </div>
                    </div>

                    <!-- Premium Plan -->
                    <div class="pricing-card">
                        <h3 class="plan-name">Premium</h3>
                        <div class="price-container">
                            <div class="price" data-monthly="197" data-yearly="1997">$197</div>
                            <div class="price-period">per month</div>
                            <div class="price-note yearly-note hidden">Billed annually ($1,997/year)</div>
                        </div>
                        <ul class="features">
                            <li>Everything in Plus</li>
                            <li>Unlimited bookings</li>
                            <li>Custom integrations</li>
                            <li>Dedicated account manager</li>
                            <li>White-label options</li>
                            <li>API access</li>
                            <li>Priority listing</li>
                            <li>Phone support</li>
                            <li>Premium only opportunities</li>
                        </ul>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-block monthly-btn" onclick="selectPlan('premium', 'monthly')">
                                Start Monthly Plan
                            </button>
                            <button class="btn btn-primary btn-block yearly-btn hidden" onclick="selectPlan('premium', 'yearly')">
                                Start Yearly Plan
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Organization Section -->
    <div class="hero-section organization-section" id="organizations">
        <div class="container">
            <div class="organization-card">
                <h2>Organizations Get Free Access!</h2>
                <p>Non-profits, schools, churches, and other organizations can access our speaker database completely free. No subscription required.</p>
                <a href="/register.html?type=organization" class="btn btn-white btn-lg">
                    Register Your Organization Free
                </a>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="faq-section">
        <div class="container">
            <div class="faq-container">
                <h2>Frequently Asked Questions</h2>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>What's the difference between the plans?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>All plans include access to our speaker database and contact information. Plus adds advanced search filters and booking tools, while Premium includes unlimited bookings, API access, and dedicated support.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Is there really no cost for organizations?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Correct! Non-profits, schools, churches, and similar organizations get completely free access to our platform. This is part of our mission to connect speakers with meaningful causes.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Can I cancel my subscription anytime?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, you can cancel your subscription at any time. Your access will continue until the end of your current billing period.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Do you offer discounts for annual billing?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Yes! When you choose annual billing, you save approximately 25% compared to monthly billing. This equals about 2-3 months free per year.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Can I upgrade or downgrade my plan?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Absolutely! You can upgrade or downgrade your plan at any time. Changes take effect at the next billing cycle, and we'll prorate any differences.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer will be auto-injected by footer.js -->

    <!-- Load Stripe -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Load Supabase from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Load config and Supabase client -->
    <script src="/js/config.js"></script>
    <script src="/js/stripe-config.js"></script>
    <script src="/js/supabase-client.js"></script>
    
    <!-- Load header and footer components -->
    <script src="/js/components/header.js"></script>
    <script src="/js/components/footer.js"></script>
    
    <!-- Page-specific JavaScript -->
    <script>
        // Initialize Stripe
        let stripe = null;
        let currentPeriod = 'monthly';
        let currentUser = null;

        // Initialize page
        async function initializePage() {
            try {
                // Initialize Stripe
                if (window.STRIPE_CONFIG && window.STRIPE_CONFIG.PUBLISHABLE_KEY) {
                    stripe = Stripe(window.STRIPE_CONFIG.PUBLISHABLE_KEY);
                }

                // Wait for Supabase
                await waitForSupabase();

                // Check authentication
                const session = await window.covetalks.checkAuth();
                if (session) {
                    currentUser = await window.covetalks.getMemberProfile(session.user.id);
                    
                    // If organization, show special message
                    if (currentUser && currentUser.member_type === 'Organization') {
                        showOrganizationMessage();
                    }
                }

                // Check for subscription success
                const urlParams = new URLSearchParams(window.location.search);
                if (urlParams.get('subscription') === 'success') {
                    showSuccessMessage();
                }

            } catch (error) {
                console.error('Initialization error:', error);
            }
        }

        // Wait for Supabase client
        function waitForSupabase() {
            return new Promise((resolve) => {
                let attempts = 0;
                const maxAttempts = 20;
                
                function check() {
                    attempts++;
                    if (typeof window.covetalks !== 'undefined' && window.covetalks.supabase) {
                        resolve();
                    } else if (attempts < maxAttempts) {
                        setTimeout(check, 250);
                    } else {
                        console.warn('Supabase client not available');
                        resolve();
                    }
                }
                check();
            });
        }

        // Toggle billing period
        function togglePeriod(period) {
            currentPeriod = period;
            
            // Update toggle UI
            document.querySelectorAll('.toggle-option').forEach(opt => {
                opt.classList.remove('active');
                if (opt.dataset.period === period) {
                    opt.classList.add('active');
                }
            });
            
            // Update pricing display
            updatePricingDisplay();
        }

        // Update pricing display
        function updatePricingDisplay() {
            const prices = document.querySelectorAll('.price');
            const yearlyNotes = document.querySelectorAll('.yearly-note');
            const yearlyBtns = document.querySelectorAll('.yearly-btn');
            const monthlyBtns = document.querySelectorAll('.monthly-btn');
            const periodElements = document.querySelectorAll('.price-period');

            prices.forEach(price => {
                const monthlyPrice = price.dataset.monthly;
                const yearlyPrice = price.dataset.yearly;
                
                if (currentPeriod === 'yearly') {
                    price.textContent = `$${yearlyPrice}`;
                } else {
                    price.textContent = `$${monthlyPrice}`;
                }
            });

            periodElements.forEach(period => {
                period.textContent = currentPeriod === 'yearly' ? 'per year' : 'per month';
            });

            // Show/hide appropriate elements
            if (currentPeriod === 'yearly') {
                yearlyNotes.forEach(note => note.classList.remove('hidden'));
                yearlyBtns.forEach(btn => btn.classList.remove('hidden'));
                monthlyBtns.forEach(btn => btn.classList.add('hidden'));
            } else {
                yearlyNotes.forEach(note => note.classList.add('hidden'));
                yearlyBtns.forEach(btn => btn.classList.add('hidden'));
                monthlyBtns.forEach(btn => btn.classList.remove('hidden'));
            }
        }

        // Select a plan
        async function selectPlan(plan, period) {
            // Check if user is logged in
            if (!currentUser) {
                // Save selected plan and redirect to login
                sessionStorage.setItem('selectedPlan', JSON.stringify({ plan, period }));
                alert('Please login or register to continue with subscription');
                window.location.href = `/login.html?redirect=${encodeURIComponent(window.location.href)}`;
                return;
            }
            
            // Get button and add loading state
            const btn = event.target;
            const originalText = btn.textContent;
            btn.classList.add('btn-loading');
            btn.disabled = true;
            
            try {
                // In production, this would create a Stripe checkout session
                // For now, show a message
                await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate API call
                
                alert(`Selected: ${plan} plan (${period})\n\nStripe integration would handle checkout here.`);
                
                // You would typically:
                // 1. Call a serverless function to create a Stripe checkout session
                // 2. Redirect to Stripe Checkout
                // 3. Handle success/cancel callbacks
                
            } catch (error) {
                console.error('Error selecting plan:', error);
                alert('An error occurred. Please try again.');
            } finally {
                btn.classList.remove('btn-loading');
                btn.disabled = false;
                btn.textContent = originalText;
            }
        }

        // Toggle FAQ
        function toggleFAQ(element) {
            const faqItem = element.parentElement;
            const answer = element.nextElementSibling;
            const icon = element.querySelector('.faq-toggle');
            
            // Toggle active class on item and answer
            faqItem.classList.toggle('active');
            answer.classList.toggle('active');
            
            // Update icon
            icon.textContent = faqItem.classList.contains('active') ? '−' : '+';
        }

        // Show organization message
        function showOrganizationMessage() {
            const pricingContent = document.getElementById('pricingContent');
            pricingContent.innerHTML = `
                <div class="card" style="text-align: center; padding: 3rem;">
                    <h2>Welcome ${currentUser.name}!</h2>
                    <p style="font-size: 1.2rem; margin: 2rem 0;">
                        As an organization, you have free access to CoveTalks.
                    </p>
                    <a href="/organization-dashboard.html" class="btn btn-primary btn-lg">
                        Go to Dashboard
                    </a>
                </div>
            `;
        }

        // Show success message
        function showSuccessMessage() {
            const container = document.querySelector('.main-content .container');
            const message = document.createElement('div');
            message.className = 'message-box success';
            message.innerHTML = `
                <h4>Subscription Successful!</h4>
                <p>Thank you for subscribing to CoveTalks. You now have full access to all features.</p>
            `;
            container.insertBefore(message, container.firstChild);
        }

        // Initialize on load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializePage);
        } else {
            initializePage();
        }
    </script>
</body>
</html>